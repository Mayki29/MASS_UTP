<!-- pages/historial_ventas.html -->
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historial de Ventas - MASS</title>
    <link rel="icon" type="image/png" href="../assets/favicon.png">
    <link rel="stylesheet" href="../styles/common.css">
    <link rel="stylesheet" href="../styles/historial_ventas.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    <script>
        // Script para aplicar el tema guardado inmediatamente
        (function() {
            // 1. Obtener el objeto completo de configuración
            const settingsString = localStorage.getItem('appSettings');
            if (settingsString) {
                // 2. Convertirlo a un objeto JavaScript
                const settings = JSON.parse(settingsString);
                // 3. Si existe una preferencia de tema y es 'oscuro', aplicar la clase
                if (settings && settings.temaVisual === 'oscuro') {
                    document.body.classList.add('dark-theme');
                }
            }
        })();
    </script>
    <header>
        <div class="logo">
            <!-- Ruta a la imagen en la carpeta de assets -->
            <img src="../assets/store-icon-flat-design-by-Vexels.svg" alt="Logo MASS" width="30" height="30">
            <span>MASS</span>
        </div>
        <nav>
            <ul>
                <li><a href="main.html">Inicio</a></li>
                <li><a href="productos.html">Productos</a></li>
                <li><a href="inventario.html">Inventario</a></li>
                <li><a href="ventas.html">Ventas</a></li>
                <li><a href="reportes.html">Reportes</a></li>
                <li><a href="historial_ventas.html">Historial</a></li>
            </ul>
        </nav>
        <div class="user-dropdown">
            <div class="user-info">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/></svg>
                <span id="userInfo">Admin</span>
            </div>
            <div class="user-dropdown-content">
                <a href="perfil.html">Ver Perfil</a>
                <a href="configuracion.html">Configuración</a>
                <a href="ayuda.html">Ayuda</a>
                <hr style="margin: 0;">
                <a href="login.html" id="logoutButton">Cerrar Sesión</a>
            </div>
        </div>
    </header>

    <!-- pages/historial_ventas.html -->
    <main>
        <div class="container">
            <h1>Historial de Ventas</h1>

            <!-- ¡NUEVO! Contenedor de Filtros -->
            <div class="filters-container">
                <input type="text" id="searchInput" placeholder="Buscar por Nro. de Venta...">
                <select id="dateFilter">
                    <option value="all">Todo el Historial</option>
                    <option value="today">Hoy</option>
                    <option value="this_week">Esta Semana</option>
                    <option value="this_month">Este Mes</option>
                </select>
            </div>

            <div class="table-container">
                <table class="history-table">
                    <!-- ... (thead sin cambios) ... -->
                    <tbody id="history-table-body">
                        <!-- Las filas del historial se insertarán aquí -->
                    </tbody>
                </table>
            </div>

            <!-- ¡NUEVO! Contenedor de Paginación -->
            <div class="pagination-container" id="pagination">
                <!-- Los botones de paginación se generarán aquí con JS -->
            </div>
        </div>
    </main>
    <!-- ... (resto del HTML: modals, footer, scripts) ... -->
    <div id="detailsModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">×</span>
            <div id="receipt-container">
                <!-- El contenido del recibo se generará aquí con JS -->
            </div>
        </div>
    </div>
    <footer>© 2025 Mass - Todos los derechos reservados</footer>

    <script src="../scripts/shared.js"></script>
    <script src="../scripts/historial_ventas.js"></script>
</body>
</html>